<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>پرسشنامه روانشناختی</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Vazirmatn", sans-serif;
        background-color: #f0f2f5;
        transition: background-color 0.5s ease;
      }
      .question-card {
        min-height: 420px;
        display: none;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.4s ease-out, transform 0.4s ease-out;
      }
      .question-card.active {
        display: flex;
        opacity: 1;
        transform: translateY(0);
      }
      .progress-bar-fill {
        transition: width 0.4s ease-in-out;
      }
      .likert-option {
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        border-width: 2px;
      }
      .likert-option.selected {
        background-color: #3b82f6;
        color: white;
        border-color: #2563eb;
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(59, 130, 246, 0.2);
      }
      .likert-option:hover:not(.selected) {
        border-color: #93c5fd;
      }
      .form-input,
      .form-select {
        border-width: 2px;
        transition: border-color 0.2s ease-in-out;
      }
      .form-input:focus,
      .form-select:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        outline: none;
      }
      .nav-btn {
        transition: all 0.2s ease-in-out;
      }
      .nav-btn:hover:not(:disabled) {
        transform: translateY(-2px);
      }
      .nav-btn:disabled {
        background-color: #d1d5db;
        cursor: not-allowed;
      }
      .modal {
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background-color: #ffffff;
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        text-align: center;
        max-width: 400px;
        width: 90%;
        position: relative;
      }
      .close-button {
        position: absolute;
        top: 12px;
        left: 12px;
        font-size: 24px;
        color: #9ca3af;
        cursor: pointer;
      }
    </style>
  </head>
  <body class="p-4 flex items-center justify-center min-h-screen">
    <div class="container mx-auto max-w-4xl w-full">
      <!-- Main Survey Container -->
      <div
        id="survey-container"
        class="relative bg-white rounded-lg shadow-xl overflow-hidden"
      >
        <!-- Header for Title and Counter (New) -->
        <div
          id="survey-header"
          class="p-4 border-b border-gray-200 text-center invisible"
        >
          <h2 id="form-title" class="text-xl font-bold text-gray-700"></h2>
          <span
            id="question-counter"
            class="text-sm font-medium text-gray-500"
          ></span>
        </div>

        <!-- Welcome Screen -->
        <div
          id="welcome-screen"
          class="question-card active flex-col items-center justify-center p-8"
        >
          <h1 class="text-4xl font-bold text-gray-800 mb-4 text-center">
            پرسشنامه روانشناختی
          </h1>
          <p class="text-lg text-gray-600 mb-8 text-center max-w-lg">
            از وقتی که برای شرکت در این پژوهش اختصاص می‌دهید، سپاسگزاریم.
            پاسخ‌های شما به ما در درک بهتر مسائل کمک خواهد کرد. لطفاً به سوالات
            با دقت پاسخ دهید.
          </p>
          <button
            id="start-btn"
            class="px-8 py-3 bg-indigo-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition transform hover:scale-105"
          >
            شروع
          </button>
        </div>

        <!-- Survey questions will be injected here -->
        <div id="questions-wrapper"></div>

        <!-- Thank You Screen -->
        <div
          id="thankyou-screen"
          class="question-card flex-col items-center justify-center p-8 text-center"
        >
          <svg
            class="w-24 h-24 text-green-500 mx-auto mb-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            ></path>
          </svg>
          <h1 class="text-3xl font-bold text-gray-800 mb-4">
            از شما سپاسگزاریم!
          </h1>
          <p class="text-lg text-gray-600 mb-6">
            پاسخ‌های شما با موفقیت ثبت شد.
          </p>
          <p class="text-sm text-gray-500">شناسه پیگیری شما:</p>
          <p
            id="user-id-final"
            class="font-mono text-blue-600 font-bold bg-blue-50 px-3 py-1 rounded-md inline-block"
          ></p>
        </div>

        <!-- Navigation Buttons (New) -->
        <div
          id="navigation-buttons"
          class="p-4 flex justify-between border-t border-gray-200 invisible"
        >
          <button
            id="next-btn"
            class="nav-btn px-8 py-2 bg-blue-600 text-white font-semibold rounded-md shadow hover:bg-blue-700"
          >
            بعدی
          </button>
          <button
            id="back-btn"
            class="nav-btn px-8 py-2 bg-gray-400 text-white font-semibold rounded-md shadow hover:bg-gray-500"
          >
            قبلی
          </button>
        </div>
      </div>

      <!-- Progress Bar -->
      <div
        id="navigation-footer"
        class="mt-4 flex items-center justify-between invisible"
      >
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div
            id="progress-bar"
            class="bg-blue-600 h-2.5 rounded-full progress-bar-fill"
            style="width: 0%"
          ></div>
        </div>
        <span
          id="progress-text"
          class="text-sm text-gray-600 font-medium mr-4 w-12 text-left"
          >۰٪</span
        >
      </div>
    </div>

    <!-- Modal for messages -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="closeModalBtn">×</span>
        <p id="modalMessage" class="text-lg font-medium text-gray-800"></p>
      </div>
    </div>

    <script type="module">
      // Firebase imports
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        onAuthStateChanged
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
        serverTimestamp
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC0uJzxWrejhRrMHKc-HqDEXDUcjpF0w6Q",
        authDomain: "questionnaire-4827b.firebaseapp.com",
        projectId: "questionnaire-4827b",
        storageBucket: "questionnaire-4827b.firebasestorage.app",
        messagingSenderId: "431810930724",
        appId: "1:431810930724:web:9fae53c798bd9b2dd050b1"
      };

      // --- App State ---
      let db, auth, userId;
      let currentQuestionIndex = 0;
      let allQuestions = [];
      const allAnswers = {};

      // --- Question Data (Your full data goes here) ---
      const demographicQuestions = [
        {
          id: "demographics-group-1",
          type: "group",
          title: "اطلاعات پایه",
          questions: [
            {
              id: "age",
              text: "سن:",
              type: "number",
              placeholder: "سن خود را وارد کنید"
            },
            {
              id: "gender",
              text: "جنسیت:",
              type: "select",
              options: ["مرد", "زن", "دیگر"]
            }
          ]
        },
        {
          id: "demographics-group-2",
          type: "group",
          title: "وضعیت تاهل",
          questions: [
            {
              id: "maritalStatus",
              text: "وضعیت تأهل:",
              type: "select",
              options: ["مجرد", "متأهل", "مطلقه", "بیوه"]
            },
            {
              id: "childrenCount",
              text: "تعداد فرزندان:",
              type: "number",
              placeholder: "تعداد فرزندان"
            }
          ]
        },
        {
          id: "education",
          text: "آخرین مدرک تحصیلی شما چیست؟",
          type: "select",
          options: [
            "دیپلم",
            "فوق دیپلم",
            "کارشناسی",
            "کارشناسی ارشد",
            "دکترا و بالاتر"
          ]
        },
        {
          id: "occupation",
          text: "شغل شما چیست؟",
          type: "text",
          placeholder: "شغل خود را وارد کنید"
        },
        {
          id: "incomeLevel",
          text: "سطح درآمد ماهانه خانواده شما چقدر است؟ (به تومان)",
          type: "select",
          options: [
            "کمتر از ۱۵ میلیون",
            "۱۵ تا ۳۰ میلیون",
            "بیشتر از ۳۰ میلیون"
          ]
        },
        {
          id: "city",
          text: "در کدام شهر سکونت دارید؟",
          type: "text",
          placeholder: "شهر محل سکونت"
        }
      ];
      const mbiQuestions = [
        {
          id: "MBI_1",
          question: "از کارم احساس خستگی می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_2",
          question: "در پایان یک روز کاری احساس می‌کنم کاملاً خسته‌ام.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_3",
          question:
            "در آغاز یک روز کاری احساس می‌کنم نمی‌توانم بیشتر از این کار کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_4",
          question: "کار کردن با مردم برایم واقعاً دشوار است.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_5",
          question: "کارم مرا تحت فشار روانی زیادی قرار می‌دهد.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_6",
          question: "احساس می‌کنم از نظر احساسی دچار فرسودگی شده‌ام.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_7",
          question: "احساس می‌کنم که این کار باعث خستگی من می‌شود.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_8",
          question:
            "وقتی از سر کار برمی‌گردم، احساس می‌کنم تمام انرژی‌ام را از دست داده‌ام.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_9",
          question: "در طول روز کاری احساس می‌کنم خسته و درمانده‌ام.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "خستگی هیجانی"
        },
        {
          id: "MBI_10",
          question:
            "با برخی افراد تحت مراقبتم به‌طور غیرشخصی رفتار می‌کنم، مثل اینکه آن‌ها اشیا هستند.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "مسخ شخصیت"
        },
        {
          id: "MBI_11",
          question: "از طریق کارم با دیگران بی‌تفاوت برخورد می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "مسخ شخصیت"
        },
        {
          id: "MBI_12",
          question: "من واقعاً نگران برخی از بیماران نیستم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "مسخ شخصیت"
        },
        {
          id: "MBI_13",
          question:
            "کار کردن با مردم باعث می‌شود احساس کنم آن‌ها مشکلاتی برای من ایجاد می‌کنند.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "مسخ شخصیت"
        },
        {
          id: "MBI_14",
          question: "احساس می‌کنم بیماران یا مراجعانم باعث خستگی‌ام می‌شوند.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "مسخ شخصیت"
        },
        {
          id: "MBI_15",
          question: "می‌توانم به راحتی در موقعیت‌های کاری دیگران را درک کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_16",
          question: "با موفقیت مشکلات بیماران یا مراجعانم را حل می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_17",
          question:
            "احساس می‌کنم با کارم به طور مثبتی بر زندگی افراد تأثیر می‌گذارم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_18",
          question: "احساس می‌کنم که انرژی لازم برای انجام کارم را دارم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_19",
          question: "در برخورد با مشکلات عاطفی در کارم به خوبی عمل می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_20",
          question:
            "در ارتباط با مراجعان یا بیماران، احساس می‌کنم کار مؤثری انجام می‌دهم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_21",
          question: "در کار با دیگران به آسانی احساس آرامش و آسودگی می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        },
        {
          id: "MBI_22",
          question: "در کار با افراد تحت مراقبتم احساس مؤثر بودن می‌کنم.",
          type: "likert",
          options: [
            "هیچ‌وقت",
            "به ندرت",
            "گاهی",
            "اغلب",
            "بسیار اغلب",
            "هر روز"
          ],
          scale: [0, 1, 2, 3, 4, 5],
          category: "احساس کاهش کارایی شخصی"
        }
      ];
      const ysqQuestions = [
        {
          id: "YSQ_1",
          question: "مردم به طور کلی برای من حمایت نخواهند کرد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_حق_طلبی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_2",
          question:
            "اکثر اوقات کسی در کنارم نیست که مراقبم باشد، احساساتم را در میان بگذارم یا واقعاً درباره‌ام فکر کند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_3",
          question: "بیشتر وقت‌ها کسی نیست که واقعاً مرا درک کند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_4",
          question:
            "به ندرت مردم قوی و قابل اعتمادی پیدا کرده‌ام که بتوانم به آن‌ها تکیه کنم و از آن‌ها حمایت بگیرم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_5",
          question:
            "احساس می‌کنم که کسانی که برایم مهم هستند، مرا ترک خواهند کرد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_6",
          question:
            "نگران این هستم که افراد نزدیک به من، مرا ترک کنند یا از من دور شوند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_7",
          question:
            "وقتی احساس می‌کنم کسی که برایم مهم است، در حال دور شدن از من است، کنترل خودم را از دست می‌دهم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_8",
          question:
            "به خاطر ناتوانی‌هایم در روابط اجتماعی، احساس می‌کنم از دیگران جدا هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_انزوای_اجتماعی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_9",
          question: "احساس می‌کنم با دیگران ارتباط ندارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_انزوای_اجتماعی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_10",
          question: "همیشه احساس می‌کنم که خارج از گروه قرار دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_انزوای_اجتماعی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_11",
          question:
            "خانواده‌ام و من بیش از حد درگیر زندگی و مشکلات یکدیگر هستیم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکامگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_12",
          question: "احساس می‌کنم هویت مستقلی ندارم - جدا از والدین یا همسرم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکامگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_13",
          question:
            "احساس می‌کنم که نمی‌توانم بدون کمک زیاد افراد نزدیک به خودم، زندگی روزمره‌ام را بگذرانم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_14",
          question: "در قضاوت خود در موقعیت‌های روزمره اعتماد ندارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_15",
          question:
            "فکر می‌کنم که اگر هر کاری را که می‌خواهم انجام دهم، مشکل ایجاد خواهد شد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_آسیب_پذیری",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_16",
          question:
            "احساس می‌کنم که فاجعه‌ای (طبیعی، جنایی، مالی یا پزشکی) ممکن است هر لحظه رخ دهد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_آسیب_پذیری",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_17",
          question:
            "بیش از حد به والدینم وابسته بوده‌ام، تا جایی که نمی‌دانم اگر آن‌ها نباشند چه خواهم کرد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکامگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_18",
          question:
            "احساس می‌کنم که در اساس نقص دارم و دیگران اگر مرا واقعاً بشناسند، نخواهند خواست با من باشند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_نقص",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_19",
          question:
            "هیچ مرد (یا زن) که دوستش دارم نمی‌تواند مرا دوست داشته باشد وقتی نقاط ضعف من را ببیند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_نقص",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_20",
          question:
            "در مورد کارهای مهم (کار یا مدرسه)، احساس می‌کنم که به اندازه دیگران با استعداد نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شکست",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_21",
          question:
            "احساس می‌کنم که در زمینه‌های مهم زندگی (کار یا مدرسه) بی‌کفایت هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شکست",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_22",
          question: "بیشتر افراد، من را آدم مستحق تری از خودم می‌دانند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_حق_طلبی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_23",
          question:
            "احساس می‌کنم که آنچه ارائه می‌دهم، برای دیگران، بیشتر از آن چیزی است که از آن‌ها می‌گیرم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ایثار",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_24",
          question:
            "آنقدر مشغول ارائه خدمت به دیگران هستم که وقت کمی برای خودم دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ایثار",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_25",
          question: "مردم می‌بینند که من زیادی سخت‌گیر هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_معیارهای_سرسختانه",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_26",
          question: "باید از همه جهت کامل باشم، در غیر این صورت ارزشی ندارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_معیارهای_سرسختانه",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_27",
          question:
            "در ابراز احساسات طبیعی یا صحبت آزادانه درباره خودم مشکل دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بازداری_هیجانی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_28",
          question:
            "از ابراز احساسات مثبت (مثل محبت، علاقه نشان دادن) به دیگران اجتناب می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بازداری_هیجانی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_29",
          question:
            "حتی وقتی می‌دانم کسی اشتباه می‌کند، ترجیح می‌دهم تعارض و بحث را اجتناب کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_تسلیم",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_30",
          question: "همیشه دیگران را اول می‌گذارم و خودم را آخر.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_تسلیم",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_31",
          question:
            "وقتی کسی رفتار بدی با من می‌کند، معمولاً فکر می‌کنم که مستحق آن هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودتنبیهی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_32",
          question: "وقتی اشتباه می‌کنم، مستحق تنبیه هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودتنبیهی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_33",
          question: "خیلی مهم است که جلب توجه و تحسین کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_جویای_تحسین",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_34",
          question: "پول و موقعیت اجتماعی برایم خیلی مهم است.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_جویای_تحسین",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_35",
          question:
            "اگر نتوانم اهدافم را محقق کنم، به راحتی عصبانی و بی‌حوصله می‌شوم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکنترلی_ناکافی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_36",
          question: "در کنترل خودم و رعایت نظم مشکل دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکنترلی_ناکافی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_37",
          question: "احساس می‌کنم که قوانین و مقررات برای من اعمال نمی‌شود.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_حق_طلبی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_38",
          question:
            "مشکل در تشخیص اینکه چگونه احساس می‌کنم و چه می‌خواهم، دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکامگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_39",
          question: "احساس می‌کنم که تمام مسئولیت‌ها بر عهده من است.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_معیارهای_سرسختانه",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_40",
          question: "مردم فکر می‌کنند که من خیلی کنترل‌گر و کمال‌طلب هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_معیارهای_سرسختانه",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_41",
          question: "اگر اشتباه کنم، خودم را سخت سرزنش می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودتنبیهی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_42",
          question: "نسبت به ابراز عشق و محبت احساس خجالت می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بازداری_هیجانی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_43",
          question:
            "مردم انتظار دارند من کارهای زیادی انجام دهم و خودم را فدا کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ایثار",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_44",
          question:
            "اگر از کاری که از من خواسته شده، سر باز زنم، احساس گناه می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_تسلیم",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_45",
          question: "برای جلب توجه دیگران تلاش زیادی می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_جویای_تحسین",
          domain: "جهت‌گیری_به_سوی_دیگران"
        },
        {
          id: "YSQ_46",
          question: "کنترل تمایلاتم برایم مشکل است.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_خودکنترلی_ناکافی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_47",
          question: "همیشه واقعه‌ها را به بدترین شکل تعبیر می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بدبینی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_48",
          question:
            "سعی می‌کنم از هر چیز جلوگیری کنم که ممکن است اشتباه پیش برود.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بدبینی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_49",
          question:
            "اگر تصمیم بگیرم کاری را انجام دهم، حتی اگر دیگران مخالف باشند، آن را انجام می‌دهم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_حق_طلبی",
          domain: "محدودیت‌های_مختل"
        },
        {
          id: "YSQ_50",
          question:
            "در دوستی‌های نزدیک، طرف مقابل همیشه می‌خواهد بیش از آنچه می‌دهد، بگیرد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بی_اعتمادی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_51",
          question: "احساس می‌کنم مردم از من سوءاستفاده می‌کنند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بی_اعتمادی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_52",
          question: "مواظب هستم که مردم انگیزه‌های واقعی‌شان را پنهان نکنند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بی_اعتمادی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_53",
          question:
            "حتی وقتی همه چیز خوب پیش می‌رود، احساس می‌کنم این وضعیت دوام نخواهد آورد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بدبینی",
          domain: "هوشیاری_بیش_از_حد_و_بازداری"
        },
        {
          id: "YSQ_54",
          question:
            "اگر کسی با من خوب رفتار کند، به نگرانی می‌افتم که قطعاً چیز پنهانی می‌خواهد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_بی_اعتمادی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_55",
          question:
            "از کودکی کسی مراقبم نبوده، راهنماییم نکرده یا به من جهت نداده است.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_56",
          question:
            "بیشتر اوقات احساس می‌کنم کسی واقعاً نمی‌فهمد که چه احساسی دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_57",
          question:
            "وقتی اشتباهی انجام دهم، احساس می‌کنم که شایسته بخشیده شدن نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شرم",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_58",
          question:
            "به نظر من هیچ‌کس آنقدر که من برایش مهم هستم، من برایش مهم نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_59",
          question:
            "وقتی احساس می‌کنم کسی که دوستش دارم به من علاقه‌ای نشان نمی‌دهد، احساس تنهایی و پوچی می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_60",
          question:
            "در بسیاری از موقعیت‌ها نگرانم که افراد نزدیک به من مرا ترک کنند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_61",
          question:
            "نیاز دارم که دیگران آنقدر به من نزدیک باشند که نتوانم بدون آن‌ها زندگی کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_62",
          question: "احساس می‌کنم که در زندگی روزمره بی‌کفایت هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_63",
          question: "خود را فردی می‌دانم که بر زندگی‌اش تسلط ندارد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شکست",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_64",
          question:
            "در مقایسه با دیگران، احساس می‌کنم به لحاظ کاری موفق نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شکست",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_65",
          question: "احساس می‌کنم که آنچه برای ارائه دادن دارم، ارزشی ندارد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_نقص",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_66",
          question: "احساس می‌کنم که از نظر اجتماعی، نامطلوب هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_نقص",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_67",
          question:
            "از کودکی کسی مراقبم نبوده، راهنماییم نکرده یا به من جهت نداده است.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_68",
          question:
            "بیشتر اوقات احساس می‌کنم کسی واقعاً نمی‌فهمد که چه احساسی دارم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_69",
          question:
            "وقتی اشتباهی انجام دهم، احساس می‌کنم که شایسته بخشیده شدن نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شرم",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_70",
          question:
            "به نظر من هیچ‌کس آنقدر که من برایش مهم هستم، من برایش مهم نیستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_محرومیت_هیجانی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_71",
          question:
            "وقتی احساس می‌کنم کسی که دوستش دارم به من علاقه‌ای نشان نمی‌دهد، احساس تنهایی و پوچی می‌کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_72",
          question:
            "در بسیاری از موقعیت‌ها نگرانم که افراد نزدیک به من مرا ترک کنند.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_ترک_شدگی",
          domain: "جدایی_و_طرد"
        },
        {
          id: "YSQ_73",
          question:
            "نیاز دارم که دیگران آنقدر به من نزدیک باشند که نتوانم بدون آن‌ها زندگی کنم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_74",
          question: "احساس می‌کنم که در زندگی روزمره بی‌کفایت هستم.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_وابستگی",
          domain: "خودگردانی_و_عملکرد_مختل"
        },
        {
          id: "YSQ_75",
          question: "خود را فردی می‌دانم که بر زندگی‌اش تسلط ندارد.",
          type: "likert",
          options: [
            "کاملاً نادرست",
            "نادرست",
            "تا حدی نادرست",
            "تا حدی درست",
            "درست",
            "کاملاً درست"
          ],
          scale: [1, 2, 3, 4, 5, 6],
          category: "طرحواره_شکست",
          domain: "خودگردانی_و_عملکرد_مختل"
        }
      ];
      const migrationQuestions = [
        {
          id: "MIQ_1",
          question: "آیا در حال حاضر به مهاجرت فکر می‌کنید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_2",
          question: "چقدر احتمال دارد که در ۵ سال آینده مهاجرت کنید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_3",
          question: "تا چه حد به دنبال اطلاعات درباره مهاجرت هستید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_4",
          question: "چقدر از وضعیت فعلی کشور خود ناراضی هستید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_5",
          question: "چقدر به بهبود شرایط زندگی خود از طریق مهاجرت امیدوارید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_6",
          question:
            "آیا تا به حال برای مهاجرت اقدام عملی (مانند ثبت‌نام در آزمون زبان، مشاوره با وکیل) کرده‌اید؟",
          type: "likert",
          options: ["خیر", "بله، در حال بررسی", "بله، اقدام کرده‌ام"],
          scale: [0, 1, 2]
        },
        {
          id: "MIQ_7",
          question: "مهمترین دلیل شما برای تمایل به مهاجرت چیست؟",
          type: "likert",
          options: [
            "اقتصادی",
            "اجتماعی",
            "سیاسی",
            "تحصیلی",
            "خانوادگی",
            "سایر"
          ],
          scale: [0, 1, 2, 3, 4, 5]
        },
        {
          id: "MIQ_8",
          question: "چه کشوری را برای مهاجرت ترجیح می‌دهید؟ (اختیاری)",
          type: "text"
        },
        {
          id: "MIQ_9",
          question: "چقدر با زبان کشور مقصد آشنایی دارید؟",
          type: "likert",
          options: ["هیچ", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_10",
          question: "آیا خانواده یا دوستان نزدیکی در کشور مقصد دارید؟",
          type: "likert",
          options: ["خیر", "بله، دوستان", "بله، خانواده", "بله، هر دو"],
          scale: [0, 1, 2, 3]
        },
        {
          id: "MIQ_11",
          question:
            "چقدر نگران چالش‌های مهاجرت (مانند یافتن شغل، سازگاری فرهنگی) هستید؟",
          type: "likert",
          options: ["اصلاً", "کم", "متوسط", "زیاد", "بسیار زیاد"],
          scale: [0, 1, 2, 3, 4]
        },
        {
          id: "MIQ_12",
          question: "آیا پس‌انداز کافی برای شروع زندگی در کشور مقصد دارید؟",
          type: "likert",
          options: ["خیر", "تا حدی", "بله، کاملاً"],
          scale: [0, 1, 2]
        }
      ];

      // --- UI Elements ---
      const welcomeScreen = document.getElementById("welcome-screen");
      const thankyouScreen = document.getElementById("thankyou-screen");
      const startBtn = document.getElementById("start-btn");
      const questionsWrapper = document.getElementById("questions-wrapper");
      const surveyHeader = document.getElementById("survey-header");
      const formTitleEl = document.getElementById("form-title");
      const questionCounterEl = document.getElementById("question-counter");
      const navigationFooter = document.getElementById("navigation-footer");
      const navigationButtons = document.getElementById("navigation-buttons");
      const progressBar = document.getElementById("progress-bar");
      const progressText = document.getElementById("progress-text");
      const backBtn = document.getElementById("back-btn");
      const nextBtn = document.getElementById("next-btn");

      // --- Initialization ---
      function initializeAppLogic() {
        const formInfo = {
          demographics: {
            title: "اطلاعات دموگرافیک",
            questions: demographicQuestions
          },
          mbi: {
            title: "پرسشنامه فرسودگی شغلی (MBI)",
            questions: mbiQuestions
          },
          ysq: {
            title: "پرسشنامه طرحواره یانگ (YSQ)",
            questions: ysqQuestions
          },
          migration: {
            title: "پرسشنامه تمایل به مهاجرت",
            questions: migrationQuestions
          }
        };

        for (const formKey in formInfo) {
          const { title, questions } = formInfo[formKey];
          questions.forEach(q => {
            allQuestions.push({ ...q, form: formKey, formTitle: title });
            // Initialize answers object to avoid undefined errors later
            if (!allAnswers[formKey]) allAnswers[formKey] = {};
          });
        }

        startBtn.addEventListener("click", startSurvey);
        backBtn.addEventListener("click", goToPreviousQuestion);
        nextBtn.addEventListener("click", () => {
          handleFormValidationAndSave(
            allQuestions[currentQuestionIndex],
            questionsWrapper.querySelector(".question-card"),
            true
          );
        });

        // Initialize Firebase
        try {
          const app = initializeApp(firebaseConfig);
          db = getFirestore(app);
          auth = getAuth(app);
          onAuthStateChanged(auth, async user => {
            if (user) {
              userId = user.uid;
              document.getElementById("user-id-final").textContent = userId;
            } else {
              await signInAnonymously(auth);
            }
          });
        } catch (error) {
          showModal("خطا در اتصال به سرور. لطفاً صفحه را رفرش کنید.");
          console.error("Firebase Init Error:", error);
        }
      }

      function startSurvey() {
        welcomeScreen.classList.remove("active");
        setTimeout(() => {
          welcomeScreen.style.display = "none";
          surveyHeader.classList.remove("invisible");
          navigationFooter.classList.remove("invisible");
          navigationButtons.classList.remove("invisible");
          renderQuestion(currentQuestionIndex);
        }, 500);
      }

      function renderQuestion(index) {
        questionsWrapper.innerHTML = "";
        if (index >= allQuestions.length) {
          finishSurvey();
          return;
        }

        const q = allQuestions[index];
        formTitleEl.textContent = q.formTitle;
        questionCounterEl.textContent = `سوال ${index + 1} از ${
          allQuestions.length
        }`;
        backBtn.disabled = index === 0;

        const card = document.createElement("div");
        card.className =
          "question-card flex-col items-center justify-center p-8";
        let contentHTML = "";

        const answerExists = allAnswers[q.form]?.[q.id] !== undefined;
        nextBtn.textContent =
          answerExists ||
          q.type === "group" ||
          q.type === "text" ||
          q.type === "select"
            ? "بعدی"
            : "یک گزینه را انتخاب کنید";
        nextBtn.disabled = !(
          answerExists ||
          q.type === "group" ||
          q.type === "text" ||
          q.type === "select"
        );

        if (q.type === "group") {
          contentHTML = `<h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">${
            q.title
          }</h2><div class="w-full max-w-lg space-y-6">${q.questions
            .map(subQ => {
              const prevVal = allAnswers[q.form]?.[subQ.id] || "";
              if (subQ.type === "number")
                return `<div><label class="block text-gray-700 text-lg font-medium mb-2">${subQ.text}</label><input type="number" data-id="${subQ.id}" value="${prevVal}" class="mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm sm:text-lg form-input" placeholder="${subQ.placeholder}"></div>`;
              if (subQ.type === "select")
                return `<div><label class="block text-gray-700 text-lg font-medium mb-2">${
                  subQ.text
                }</label><select data-id="${
                  subQ.id
                }" class="mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm sm:text-lg form-select"><option value="">انتخاب کنید...</option>${subQ.options
                  .map(
                    opt =>
                      `<option value="${opt}" ${
                        prevVal === opt ? "selected" : ""
                      }>${opt}</option>`
                  )
                  .join("")}</select></div>`;
            })
            .join("")}</div>`;
        } else if (q.type === "text") {
          const prevVal = allAnswers[q.form]?.[q.id] || "";
          contentHTML = `<h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">${
            q.text || q.question
          }</h2><div class="w-full max-w-lg"><input type="text" data-id="${
            q.id
          }" value="${prevVal}" class="mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm sm:text-lg form-input" placeholder="${
            q.placeholder || "پاسخ خود را وارد کنید"
          }"></div>`;
        } else if (q.type === "select") {
          const prevVal = allAnswers[q.form]?.[q.id] || "";
          contentHTML = `<h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">${
            q.text || q.question
          }</h2><div class="w-full max-w-lg"><select data-id="${
            q.id
          }" class="mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm sm:text-lg form-select"><option value="">انتخاب کنید...</option>${q.options
            .map(
              opt =>
                `<option value="${opt}" ${
                  prevVal === opt ? "selected" : ""
                }>${opt}</option>`
            )
            .join("")}</select></div>`;
        } else if (q.type === "likert") {
          const prevVal = allAnswers[q.form]?.[q.id];
          contentHTML = `<p class="text-xl font-medium text-gray-800 mb-8 text-center">${
            q.question
          }</p><div class="flex flex-col sm:flex-row flex-wrap justify-center gap-3 w-full">${q.options
            .map(
              (opt, i) =>
                `<button type="button" class="likert-option flex-1 px-4 py-3 border border-gray-300 rounded-md text-gray-700 ${
                  q.scale[i] == prevVal ? "selected" : ""
                }" data-value="${q.scale[i]}">${opt}</button>`
            )
            .join("")}</div>`;
        }

        card.innerHTML = contentHTML;
        questionsWrapper.appendChild(card);
        setTimeout(() => card.classList.add("active"), 10);

        card.querySelectorAll(".likert-option").forEach(btn => {
          btn.addEventListener("click", e =>
            handleLikertSelection(e.target, q, card)
          );
        });
        updateProgress(index);
      }

      function handleLikertSelection(clickedButton, questionData, card) {
        card
          .querySelectorAll(".likert-option")
          .forEach(btn => btn.classList.remove("selected"));
        clickedButton.classList.add("selected");
        allAnswers[questionData.form][questionData.id] = parseInt(
          clickedButton.dataset.value,
          10
        );
        nextBtn.disabled = false;
        nextBtn.textContent = "بعدی";
      }

      function handleFormValidationAndSave(
        questionData,
        card,
        moveToNext = false
      ) {
        let isValid = true;
        if (questionData.type === "group") {
          questionData.questions.forEach(subQ => {
            const input = card.querySelector(`[data-id="${subQ.id}"]`);
            input.classList.remove("border-red-500");
            if (!input.value) {
              isValid = false;
              input.classList.add("border-red-500");
            } else {
              allAnswers[questionData.form][subQ.id] =
                subQ.type === "number" ? parseInt(input.value) : input.value;
            }
          });
        } else if (
          questionData.type === "text" ||
          questionData.type === "select"
        ) {
          const input = card.querySelector(`[data-id="${questionData.id}"]`);
          input.classList.remove("border-red-500");
          if (!input.value) {
            isValid = false;
            input.classList.add("border-red-500");
          } else {
            allAnswers[questionData.form][questionData.id] = input.value;
          }
        } else if (questionData.type === "likert") {
          if (allAnswers[questionData.form]?.[questionData.id] === undefined) {
            isValid = false;
          }
        }
        if (!isValid) showModal("لطفاً به این سوال پاسخ دهید.");
        if (isValid && moveToNext) goToNextQuestion();
        return isValid;
      }

      function goToNextQuestion() {
        if (
          !handleFormValidationAndSave(
            allQuestions[currentQuestionIndex],
            questionsWrapper.querySelector(".question-card")
          )
        ) {
          return;
        }
        const currentCard = questionsWrapper.querySelector(
          ".question-card.active"
        );
        if (currentCard) currentCard.classList.remove("active");

        setTimeout(() => {
          currentQuestionIndex++;
          renderQuestion(currentQuestionIndex);
        }, 400);
      }

      function goToPreviousQuestion() {
        if (currentQuestionIndex === 0) return;
        const currentCard = questionsWrapper.querySelector(
          ".question-card.active"
        );
        if (currentCard) currentCard.classList.remove("active");

        setTimeout(() => {
          currentQuestionIndex--;
          renderQuestion(currentQuestionIndex);
        }, 400);
      }

      async function finishSurvey() {
        surveyHeader.style.display = "none";
        navigationFooter.style.display = "none";
        navigationButtons.style.display = "none";
        thankyouScreen.style.display = "flex";
        setTimeout(() => thankyouScreen.classList.add("active"), 50);

        // Prepare final data structure by flattening
        const finalData = { userId: userId, timestamp: serverTimestamp() };
        for (const formKey in allAnswers) {
          for (const questionId in allAnswers[formKey]) {
            finalData[questionId] = allAnswers[formKey][questionId];
          }
        }

        try {
          await setDoc(doc(db, "formSubmissions", userId), finalData);
          console.log("Data submitted successfully.");
        } catch (e) {
          console.error("Error submitting data:", e);
          showModal(
            `خطا در ثبت نهایی اطلاعات: ${e.message}. لطفاً از اتصال اینترنت خود اطمینان حاصل کرده و قوانین فایربیس را بررسی کنید.`
          );
        }
      }

      function updateProgress(index) {
        const percentage = Math.round(
          ((index + 1) / allQuestions.length) * 100
        );
        progressBar.style.width = `${percentage}%`;
        progressText.textContent = `${percentage}٪`;
      }

      // --- Modal Functions ---
      function showModal(message) {
        const modal = document.getElementById("myModal");
        const modalMessage = document.getElementById("modalMessage");
        modalMessage.textContent = message;
        modal.style.display = "flex";
      }
      function closeModal() {
        document.getElementById("myModal").style.display = "none";
      }
      document
        .getElementById("closeModalBtn")
        .addEventListener("click", closeModal);

      // --- Entry Point ---
      window.onload = initializeAppLogic;
    </script>
  </body>
</html>
